<!DOCTYPE html>
<html lang=en>
<head>
<meta charset=UTF-8>
<link rel=preload href=/ThysbelonTitle.svg as=image type=image/svg+xml>
<link rel=preload href=/thysbelonicon.svg as=image type=image/svg+xml>
<link rel=preload href=/BlogStylesheet.css as=style>
<meta name="color-scheme" content="dark light"><title>Trouble with N64 Sequenced Music - Thysbelon</title>
<meta property="og:title" content="Trouble with N64 Sequenced Music - Thysbelon">
<meta name=theme-color content=#ff4c60>
<link rel=author href=/About/>
<meta name=viewport content=width=device-width,initial-scale=1.0>
<meta name="description" content="DLS files are really tough to work with. The only thing that can convert them is Viena. I've been extracting soundbanks from N64 games, but N64SoundbankTool only extracts them as DLS; so when I convert the DLS to SF2 and play it with the N64-music-converted-to-midi, I can't tell how many..."><meta property="og:description" content="DLS files are really tough to work with. The only thing that can convert them is Viena. I've been extracting soundbanks from N64 games, but N64SoundbankTool only extracts them as DLS; so when I convert the DLS to SF2 and play it with the N64-music-converted-to-midi, I can't tell how many..."><script> function PlayN64(){ console.log('playn64'); /*chip player js method*/ var player=document.createElement("iframe"); player.style.display="none"; document.getElementById("n64but").after(player); player.src="https://mmontag.github.io/chip-player-js/?play=Nintendo%2064%20(SoundFont%20MIDI)%2FBomberman%20Hero%2F03%20-%20Redial.mid"; /*setTimeout(player.remove(), 108000)*/ } </script>
<link rel=icon type=image/x-icon href=/thysbelonicon.svg>
<link rel=stylesheet href=/BlogStylesheet.css><meta name="og:image" content=[]></head>
<body>
<header><a href=/Home><img id=blogtitle src=/ThysbelonTitle.svg alt=Thysbelon. width=1002 height=272><img src=/thysbelonicon.svg alt="Logo of a Hummingbird moth." width=280 height=280></a></header>
<nav><ul><li><a href=/About/>About</a><li><a href=/Portfolio/>Portfolio</a><li><a href=/Subscribe/>Subscribe</a><li><a href=/Archive/>Archive</a><li><details><summary>Art</summary><ul><li><a href=/Programs/>Programs</a><li><a href=/Photography/>Photography</a><li><a href=/Digital-Art/>Digital Art</a></details>
	<li><a href=/>Language/言語</a></ul></nav>
<main itemscope itemtype=https://schema.org/BlogPosting>
<section>
<h1 itemprop=headline>Trouble with N64 Sequenced Music</h1>
<time itemprop=datePublished datetime=2023-01-18>18 January 2023</time>
<p>DLS files are really tough to work with. The only thing that can convert them is Viena. I've been extracting soundbanks from N64 games, but N64SoundbankTool only extracts them as DLS; so when I convert the DLS to SF2 and play it with the N64-music-converted-to-midi, I can't tell how many of the flaws are from the DLS conversion, and how many are from the N64 extraction... (They're probably the fault of the N64 extraction) <br>and I don't think I'll be able to find a way to play DLS files on the web, or even in my daw...
<p>I've also found out that embedding an N64 song in sequenced form on a webpage is impossible. <a href=/2023/01/16/Can-You-Play-Midi-with-SF2-on-the-Web>It was easy to do for DS</a>, because I could just convert the song to Midi with perfect accuracy using <a href=https://vgmtrans.github.io/vgmtrans/ target=_blank>VGMTrans</a>, and then play that midi with the excellent <span class=nowrap><a href=https://www.pg-fl.jp/music/js-synthesizer/index.en.htm target=_blank>js-synthesizer</a></span>, which has helpful documentation explaining how to use it. Converting the N64 music to Midi isn't an option, because while N64 Soundbank Tool is good, it's not perfect, and there are glaring inaccuracies. Another option is to play the N64 Music files in their original format: USF, but the few web tools that can play usf, like webn64 and <a href=https://mmontag.github.io/chip-player-js/ target=_blank>Chip Player JS</a>, are very complex with little documentation, so it's very difficult to embed them.
<p>The best results came from using Chip Player JS in an invisible iframe (but the usf still stutters at the start sometimes, which is why I'm using the midi version from Chip Player, which I can't download because it injects midi event data at runtime to fix most of the songs' inaccuracies (except tremolo)). It has a feature that allows me to link to a specific song to automatically play it; the only problem is that it will play every song from that game as well, and there's no way to stop it. For Bomberman Hero specifically, this isn't so bad, but imagine if I wanted to play a peaceful dialogue theme, and a tense battle theme played right after it?</p>
<button onclick=this.onclick=null;PlayN64() style=margin-bottom:1rem id=n64but>Start Jams</button>
<p>Apparently, one of the reasons it is so difficult to create a good usf player for web is because there are no good usf players to port to web. Every usf player out there is just an emulator with no visual output; they seek through songs by loading save states, which is why they seek so slowly.
<p>Part of the problem may be the usf format itself, because they're apparently <a href=https://github.com/derselbst/ANMP/wiki/Reproducing-N64-OSTs-accurately#emulating-the-game---lazyusf target=_blank>just the rom and save states.</a>
<p>Anyway, the best part of this journey was discovering <span class=nowrap><a href=https://mmontag.github.io/chip-player-js/ target=_blank>Chip Player JS</a></span>; even though it didn't work for this one very specific purpose that I am unlikely to ever do again outside of this blog post, it's a really cool website! <br>mmontag's efforts to create a web player for every chiptune format, <em>and</em> <a href=https://mmontag.github.io/chip-player-js/browse/Nintendo%2064%20(SoundFont%20MIDI) target=_blank>improve the N64 situation by fixing the inaccuracies in extracted midi files</a>, are quite impressive! If I took the time to analyze their code, I probably could create a stripped down version that lets me embed any song I want without autoplay, but I'll leave that for another day.
</section>
<div class=tags>Tags:<ul><li><a href=/Tags/N64 rel=tag>N64</a><li><a href=/Tags/Midi rel=tag>Midi</a></ul></div>
<div class=tags>Categories:<ul><li><a href=/Categories/Web-Development rel=category>Web Development</a><li><a href=/Categories/Video-Game rel=category>Video Game</a></ul></div>
</main>
<aside>
<h2>Related Posts</h2><ul class="gallery padb">




<li><a href=/2023/01/23/Looping-N64-Midi>
Looping N64 Midi<br>
<p>Start Jams The previous two N64 midis had blank space after the end of the loop, so I cut off...</p>
</a>



<li><a href=/2023/01/22/Redial>
Redial<br>
<p>Start Jams Today I put a midi of Redial on the web! :) To get it more accurate, I had...</p>
</a>



<li><a href=/2023/01/19/Success-with-N64-Sequenced-Music>
Success with N64 Sequenced Music<br>
<p>Start Jams Remember when I said I would never attempt to embed N64 sequenced music on a webpage again? I...</p>
</a>



<li><a href=/2023/01/16/Can-You-Play-Midi-with-SF2-on-the-Web>
Can You Play Midi with SF2 on the Web?<br>
<p>


Yes.
Start Jams
Thank you to jet2jet for making such an amazing tool!

</p>
</a>
</ul>
</aside>
<footer>Header font from <a href=http://velvetyne.fr/fonts/compagnon/ target=_blank>Velvetyne</a></footer>
<script src=/webpnotice.js></script></body></html>