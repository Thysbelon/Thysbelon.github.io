<html lang="en"><head>
<meta charset="UTF-8">
<title>My Attempts to Improve GBA Music Romhacking and SiIva-Style "Ripping" - Thysbelon</title>
<meta property="og:title" content="My Attempts to Improve GBA Music Romhacking and SiIva-Style " ripping"="" -="" thysbelon"="">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta name="color-scheme" content="dark light">
<meta name="theme-color" content="#ff4c60">
<link rel="stylesheet" href="/css/BlogStylesheet.css">
 

<link rel="icon" type="image/x-icon" href="/img/thysbelonicon.svg">

 
 


 
<!-- to do: og:image property here. make a universal eleventyConfig function to fetch the first image of a post. -->
</head>
<body>
<header>
<a href="/">
<img id="blogtitle" src="/img/ThysbelonTitle.svg" alt="Thysbelon." width="1002" height="272" style="--natural-width: 1002; --natural-height: 272;"><img src="/img/thysbelonicon.svg" alt="Logo of a Hummingbird moth." width="58" height="58" style="--natural-width: 58; --natural-height: 58;">
</a>
</header>
<nav><ul> 

		<li><a href="/About/">About</a></li>
<li><a href="/Archive/">Archive</a></li>
<li><a href="/Portfolio/">Portfolio</a></li>
<li><a href="/Subscribe/">Subscribe</a></li>
		<li>
				<details>
				<summary>
				Art
				</summary>
				<ul>
				<li><a href="/Digital-Art/">Digital Art</a></li>
<li><a href="/Photography/">Photography</a></li>
<li><a href="/Programs/">Programs</a></li>
				</ul>
				</details>
			</li>
		
	
</ul></nav>
<main> 
<nav class="toc">
	<details>
		<summary>
			Contents
		</summary>
		<span id="toc-top"><a href="#">Top</a></span>
		<ol><li><a href="#GBA_Mus_Ripper">GBA_Mus_Ripper</a></li><li><a href="#Midi2AGB">Midi2AGB</a></li><li><a href="#gba-song-assembler.py">gba-song-assembler.py</a></li></ol></details></nav>

<h1 itemprop="headline">My Attempts to Improve GBA Music Romhacking and SiIva-Style "Ripping"</h1>
<time itemprop="datePublished" datetime="2024-09-24">24 September 2024</time>
<p>(Whenever I talk about "ripping" in the below post, I am referring to a <a href="https://siivagunner.fandom.com/wiki/Rip" target="_blank">style of mashup made popular by SiIvagunner</a>.)
</p><p>Hello! Working on <a href="/Blog/2024-8-30/You-Can-Use-FamiStudio-to-Make-High-Quality-Rips">my last post</a> made me think about how, even though GBA ripping is very easy and reliable especially compared to other consoles, the process could still be improved. For example, GBA_Mus_Ripper has a bug that causes the generated soundfonts to sound horrible in fluidsynth, and it often adds vibrato to songs that aren't supposed to have vibrato.
<br>I was also thinking about how I remembered Sappy2006 being a very easy to use program to inject sequence data into most GBA games. I thought "How hard could it be to rewrite that part of Sappy2006 in a modern programming language so more people can use it?". If I could pull it off, the result would be useful to both romhackers <em>and</em> high quality rippers. And I did pull it off!

</p><section>
<h2 id="GBA_Mus_Ripper"><a href="https://github.com/Thysbelon/gba-mus-ripper" target="_blank">GBA_Mus_Ripper</a></h2>
<p>I tried to make this fork of GBA_Mus_Ripper the best it could be. I need to give huge credit to <a href="https://github.com/IAGOnGithub/gba-mus-ripper" target="_blank">IAGOnGithub</a>, who fixed the fluidsynth soundfont bug and made lots of other bug fixes too. 
<br>This version of GBA_Mus_Ripper is a fork of IAGOnGithub's fork of <a href="https://github.com/berg8793/gba-mus-ripper" target="_blank">berg8793's fork</a> of <a href="https://github.com/CaptainSwag101/gba-mus-ripper" target="_blank">CaptainSwag and Bregalad's GBA_Mus_Ripper</a>. I also took a bug fix from <a href="https://github.com/justedni/gba-mus-ripper" target="_blank">justedni's fork</a>. 
</p><p>I recommend running GBA_Mus_Ripper with the arguments <span class="nowrap"><code>-xg -sb -rc -raw</code><span>.
</span></span></p><dl class="reg-size-text">
<dt><code>-sb</code></dt>
	<dd>Outputs all the soundbanks in the rom as separate sf2 files, instead of all in one sf2 file as is the default. This is necessary for some games to get functional soundfonts (e.g. Circle of the Moon).</dd>
<dt><code>-rc</code></dt>
	<dd>Rearranges the channels of the output midi in order to avoid channel 10, which midi synthesizers read as the percussion channel. Some synthesizers will respect the midi file's request to treat channel 10 as an ordinary tone channel, but some like fluidsynth do not, so <code>-rc</code> is necessary for these cases.</dd>
<dt><code>-raw</code></dt>
	<dd>A mode that focuses on dumping raw GBA sequence data. Using <code>-raw</code> is most useful for people who plan on injecting their edited midi back into the game, but I recommend that all users use it because I've updated this mode to sound as accurate to real hardware as possible.
</dd><dt><code>-xg</code></dt>
	<dd>May not be necessary, but I've never tested the program without it, and I don't think it has any downsides. <code>-xg</code> tells the program to use the extended general midi standard when outputting midis.</dd>
</dl>
</section>

<section>
<h2 id="Midi2AGB"><a href="https://github.com/Thysbelon/midi2agb" target="_blank">Midi2AGB</a></h2>
<p>This is a program written by ipatix that can take a midi file and convert it into ARM assembly code that can be injected into a GBA game. It's very good!
</p><p>Update Oct 4 2024: I have made slight modifications to it for the purpose of my romhacking/ripping workflow.
</p></section>

<section>
<h2 id="gba-song-assembler.py"><a href="https://github.com/Thysbelon/gba-song-assembler" target="_blank">gba-song-assembler.py</a></h2>
<p>This is a rewrite of <a href="https://github.com/Touched/Sappy/blob/master/source/frmAssembler.frm" target="_blank">Sappy2006's assembler</a> into python. This program takes an .s file outputted by Midi2AGB, compiles it to machine code, and injects it into a GBA game. The original Sappy2006 could only be used on Windows, but this version should be usable on any platform that can run Python!
</p></section>



<p>I hope you find these programs useful!

</p><div class="tags">Tags:<ul>
	<li><a href="/Tags/Mashup" rel="tag">Mashup</a>

	</li><li><a href="/Tags/GBA" rel="tag">GBA</a>

	</li><li><a href="/Tags/Midi" rel="tag">Midi</a>

	</li><li><a href="/Tags/Modding" rel="tag">Modding</a>

	</li><li><a href="/Tags/Guide" rel="tag">Guide</a>
</li></ul></div>
<div class="tags">Categories:<ul>
	<li><a href="/Categories/Music" rel="category">Music</a>

	</li><li><a href="/Categories/Video-Game" rel="category">Video Game</a>
</li></ul></div>

</main>

<footer>Header font from <a href="http://velvetyne.fr/fonts/compagnon/" target="_blank">Velvetyne</a></footer>

</body></html>